from script.squad.plausible_answer import PlausibleAnswer

check_data = """
{"no": 4385, "質問": "Dalkom Somaliaが衛星インターネットを提供し始めたのはいつですか？", "参考情報": "2009年時点で提供していたと記載されており、開始年が2009年と推定可能。", "誤答候補": "2009年", "答え": "<p>😊 <strong>ステップ1:</strong> 質問はDalkom Somaliaの衛星インターネットの開始年を尋ねています。</p><p>📄 <strong>ステップ2:</strong> 参考情報には「2009年時点で提供していた」と明記されており、2009年には既にサービスが存在していたと判断できます。</p><p>✅ <strong>ステップ3:</strong> この記述から、開始年が2009年であると<strong>推定</strong>できます。文脈的に妥当な解釈です。</p><p>✅ <strong>正しい答え:</strong> 2009年</p><p>❌ <strong>誤答候補:</strong> 一見正しく見えますが、「2009年に始めた」という明確な記述ではない点に注意が必要です。ただし文意から合理的に導けるため、誤答とは言えません。</p><p>まとめ：明確な記述はないものの、2009年に提供していたとの情報から開始年と推定でき、正答と判断可能です。✅</p>", "グラフ情報": {"ノード": [{"id": "ISP_Dalkom", "label": "Company", "name": "Dalkom Somalia"}, {"id": "Service_SatelliteInternet", "label": "Service", "name": "衛星インターネット"}], "関係": [{"source": "ISP_Dalkom", "relation": "provides_service_since", "target": "Service_SatelliteInternet", "year": "2009"}]}}
{"no": 4387, "質問": "ソマリア初のモバイルサービスは何ですか？", "参考情報": "2012年にTri-Band 3Gサービスが国初の3Gサービスとして導入と記載。", "誤答候補": "Tri-Band 3G", "答え": "<p>😊 <strong>ステップ1:</strong> ソマリアで初めて導入されたモバイルサービスを問うています。</p><p>📄 <strong>ステップ2:</strong> 参考情報には「2012年にTri-Band 3Gサービスが国初の3Gサービスとして導入」と明記されています。</p><p>✅ <strong>ステップ3:</strong> 「国初」と記載があるため、他の選択肢の余地はなくTri-Band 3Gが最初と断定可能です。</p><p>✅ <strong>正しい答え:</strong> Tri-Band 3G</p><p>❌ <strong>誤答候補:</strong> 表面上は正しいが、他のモバイル技術（2Gなど）が以前にあった可能性が排除できない点で文書上の明記は重要。</p><p>まとめ：参考情報に「国初の3Gサービス」と明記されており、Tri-Band 3Gが初のモバイルサービスとして正答です。✅</p>", "グラフ情報": {"ノード": [{"id": "Service_TriBand3G", "label": "Service", "name": "Tri-Band 3G"}, {"id": "Country_Somalia", "label": "Country", "name": "ソマリア"}], "関係": [{"source": "Country_Somalia", "relation": "has_first_mobile_service", "target": "Service_TriBand3G", "year": "2012"}]}}
{"no": 4388, "質問": "Tri-Bandとは何の略ですか？", "参考情報": "Tri-Band 3G は「第3世代移動通信技術（third generation）」と説明されている。", "誤答候補": "第3世代", "答え": "<p>😊 <strong>ステップ1:</strong> 「Tri-Band」が意味する技術や用語を問うています。</p><p>📄 <strong>ステップ2:</strong> 参考情報には「Tri-Band 3G は第3世代移動通信技術（third generation）」と説明されており、略語の意味が明記されています。</p><p>✅ <strong>ステップ3:</strong> 「第3世代」という表現は、3G（Third Generation）技術の正確な訳であり、内容的にも一致。</p><p>✅ <strong>正しい答え:</strong> 第3世代</p><p>❌ <strong>誤答候補:</strong> 一見正解ですが、「Tri-Band」は厳密には周波数帯の数を指すこともあり、3G技術そのものを意味するとは限らない場合もあります。</p><p>まとめ：文中の説明から「第3世代」と理解でき、妥当な答えです。✅</p>", "グラフ情報": {"ノード": [{"id": "Term_TriBand3G", "label": "Term", "name": "Tri-Band 3G"}, {"id": "Tech_3G", "label": "Technology", "name": "第3世代移動通信"}], "関係": [{"source": "Term_TriBand3G", "relation": "refers_to", "target": "Tech_3G"}]}}
{"no": 4391, "質問": "ソマリアが初めてインターネットを利用可能になったのはいつですか？", "参考情報": "2013年11月にソマリアは初の光ファイバー接続を受けた。", "誤答候補": "2013年", "答え": "<p>😊 <strong>ステップ1:</strong> ソマリアでインターネット利用が可能になった時期を問うています。</p><p>📄 <strong>ステップ2:</strong> 参考情報には「2013年11月に初の光ファイバー接続を受けた」と記載されており、これがインターネット利用開始の契機であると読み取れます。</p><p>✅ <strong>ステップ3:</strong> 光ファイバー接続の導入は高速なインターネット接続の実現を意味し、利用可能になったと判断できます。</p><p>✅ <strong>正しい答え:</strong> 2013年</p><p>❌ <strong>誤答候補:</strong> 表面上は正しいが、「2013年に利用開始」と直接的な記述はない点に注意。ただし光ファイバー導入はそれを強く示唆。</p><p>まとめ：明確な記述に基づき、2013年が正しい開始年と判断できます。✅</p>", "グラフ情報": {"ノード": [{"id": "Country_Somalia", "label": "Country", "name": "ソマリア"}, {"id": "Infra_FiberOptic", "label": "Infrastructure", "name": "光ファイバー接続"}], "関係": [{"source": "Country_Somalia", "relation": "first_internet_access", "target": "Infra_FiberOptic", "year": "2013"}]}}
{"no": 4392, "質問": "Hormuudのケーブルネットワークはどれくらいの長さですか？", "参考情報": "HormuudはLiquid Telecomの17,000 km（10,500マイル）の地上ケーブルネットワークに接続されると記載。", "誤答候補": "17,000 km（10,500マイル）", "答え": "<p>😊 <strong>ステップ1:</strong> Hormuudのケーブルネットワークの長さに関する質問です。</p><p>📄 <strong>ステップ2:</strong> 参考情報には「17,000 kmの地上ケーブルネットワークに接続される」と明記されています。</p><p>✅ <strong>ステップ3:</strong> Hormuudがこのネットワークに接続されることで、17,000 km（10,500マイル）のネットワークを利用可能になります。</p><p>✅ <strong>正しい答え:</strong> 17,000 km（10,500マイル）</p><p>❌ <strong>誤答候補:</strong> 正しく見えるが、Hormuud自身の保有するケーブルとは限らず、接続先の規模を示している点には注意。</p><p>まとめ：接続されるネットワークの長さとして17,000 kmが正確に記載されており、妥当な回答です。✅</p>", "グラフ情報": {"ノード": [{"id": "Company_Hormuud", "label": "Company", "name": "Hormuud"}, {"id": "Infra_LiquidTelecom", "label": "Infrastructure", "name": "Liquid Telecomケーブルネットワーク"}], "関係": [{"source": "Company_Hormuud", "relation": "connected_to", "target": "Infra_LiquidTelecom", "length": "17000 km"}]}}

"""

plausible = PlausibleAnswer()
plausible.have_graph_data = True

is_valid, clipboard_data = plausible.check_clipboard_data(check_data, check_rows=5)
print(clipboard_data)
print(f"Is Valid: {is_valid}")
